<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tatua Ticketing System</title>
    <link rel="shortcut icon" href="logo.png" type="image/x-icon">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <header class="screen-header">
            <div class="logo">
                <img src="logo.png" alt="Tatua Logo">
            </div>
            <h1>Tatua</h1>
            <nav>
                <a href="#" class="nav-link active" data-screen="raiseTicket">Raise Ticket</a>
                <a href="#" class="nav-link" data-screen="ticketsList">Tickets List</a>
            </nav>
            <div class="storage-selector">
                <label for="storageType">Storage:</label>
                <select id="storageType">
                    <option value="memory">In Memory</option>
                    <option value="session">Session</option>
                    <option value="local">Local</option>
                </select>
            </div>
        </header>

        <main>
            <div id="raiseTicketScreen" class="screen active">
                <div class="screen-content">
                    <p class="form-description">How can we help you? Fill this form and we will get back to you as soon
                        as possible.</p>
                    <form id="ticketForm" novalidate>
                        <!-- Form fields for creating a new ticket -->
                        <div class="form-group form-row">
                            <label for="fullName">Full Name:</label>
                            <div class="input-container"><input type="text" id="fullName" name="fullName" required><svg
                                    class="error-icon" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd"
                                        d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                                        clip-rule="evenodd" />
                                </svg><span class="error-message" id="fullNameError"></span></div>
                        </div>
                        <div class="form-group form-row">
                            <label for="email">Email Address:</label>
                            <div class="input-container"><input type="email" id="email" name="email" required><svg
                                    class="error-icon" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd"
                                        d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                                        clip-rule="evenodd" />
                                </svg><span class="error-message" id="emailError"></span></div>
                        </div>
                        <div class="form-group form-row">
                            <label for="phone">Phone Number:</label>
                            <div class="input-container"><input type="tel" id="phone" name="phone" required><svg
                                    class="error-icon" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd"
                                        d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                                        clip-rule="evenodd" />
                                </svg><span class="error-message" id="phoneError"></span></div>
                        </div>
                        <div class="form-group form-row">
                            <label for="subject">Subject:</label>
                            <div class="input-container">
                                <select id="subject" name="subject" required>
                                    <option value="" disabled selected>-- Select an issue --</option>
                                    <option value="Issue with Mobile Banking (USSD / App)">Issue with Mobile Banking
                                        (USSD / App)</option>
                                    <option value="Problem with Bulk SMS Service">Problem with Bulk SMS Service</option>
                                    <option value="Core Banking System Support">Core Banking System Support</option>
                                    <option value="Other (General Inquiry)">Other (General Inquiry)</option>
                                </select><svg class="error-icon" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd"
                                        d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                                        clip-rule="evenodd" />
                                </svg><span class="error-message" id="subjectError"></span>
                            </div>
                        </div>
                        <div class="form-group form-row">
                            <label for="message">Message:</label>
                            <div class="input-container"><textarea id="message" name="message" rows="5"
                                    required></textarea><svg class="error-icon" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd"
                                        d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                                        clip-rule="evenodd" />
                                </svg><span class="error-message" id="messageError"></span></div>
                        </div>
                        <div class="form-group form-row">
                            <label>Preferred Contact:</label>
                            <div class="input-container">
                                <div class="radio-group"><label class="radio-label"><input type="radio" name="contact"
                                            value="Email"><span class="radio-custom"></span>Email</label><label
                                        class="radio-label"><input type="radio" name="contact" value="Phone"><span
                                            class="radio-custom"></span>Phone</label></div><span class="error-message"
                                    id="contactError"></span>
                            </div>
                        </div>
                        <div class="form-group form-row">
                            <label for="attachment">Attachment:</label>
                            <div class="input-container">
                                <div class="file-input-wrapper">
                                    <button type="button" class="file-button">Choose File</button>
                                    <span class="file-text">No file chosen</span>
                                    <div class="file-preview-container"></div>
                                    <input type="file" id="attachment" name="attachment" accept=".pdf,.jpg,.jpeg,.png">
                                </div>
                                <span class="allowed-files-text">Allowed files: PDF, JPG, PNG. Max size: 1MB.</span>
                                <span class="error-message" id="attachmentError"></span>
                            </div>
                        </div>
                        <div class="form-group checkbox-group"><label class="checkbox-label"><input type="checkbox"
                                    name="terms" id="terms"><span class="checkbox-custom"></span>I agree to the Terms
                                and Conditions</label><span class="error-message" id="termsError"></span></div>
                        <button type="submit" class="submit-btn">Submit</button>
                    </form>
                </div>
            </div>

            <div id="ticketsListScreen" class="screen">
                <div class="screen-content">
                    <div class="table-controls">
                        <button id="sortBtn" class="control-btn"><svg viewBox="0 0 20 20" fill="currentColor">
                                <path
                                    d="M3 3a1 1 0 000 2h14a1 1 0 100-2H3zM3 7a1 1 0 000 2h10a1 1 0 100-2H3zM3 11a1 1 0 100 2h4a1 1 0 100-2H3zM13 16a1 1 0 102 0v-5.586l1.293 1.293a1 1 0 001.414-1.414l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 101.414 1.414L13 10.414V16z" />
                            </svg>Sort</button>
                        <button id="filterBtn" class="control-btn"><svg viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z"
                                    clip-rule="evenodd" />
                            </svg>Filter</button>
                        <button id="refreshBtn" class="control-btn"><svg viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 110 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"
                                    clip-rule="evenodd" />
                            </svg>Refresh</button>
                    </div>
                    <div class="table-container">
                        <table id="ticketsTable" class="tickets-table">
                            <thead>
                                <tr>
                                    <th>Ticket ID</th>
                                    <th>Raised by</th>
                                    <th>Ticket Details</th>
                                    <th>Date Created</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="ticketsTableBody"></tbody>
                        </table>
                        <div id="emptyState" class="empty-state">
                            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="1">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                                <polyline points="7 10 12 15 17 10" />
                                <line x1="12" y1="15" x2="12" y2="3" />
                            </svg>
                            <p>No tickets found</p>
                            <p class="empty-subtitle">Create your first ticket or adjust your filters</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div id="viewTicketModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="viewModalTitle"></h2><span class="close-modal">&times;</span>
            </div>
            <div id="viewModalBody" class="modal-body"></div>
            <div class="modal-footer"><button class="modal-secondary-btn modal-cancel-btn">Close</button><button
                    id="downloadBtn" class="submit-btn">Download Details</button></div>
        </div>
    </div>
    <div id="editTicketModal" class="modal">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h2 id="editModalTitle">Edit Ticket</h2><span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="editTicketForm" class="modal-form" novalidate>
                    <!-- Dedicated form for editing tickets -->
                    <div class="form-group form-row">
                        <label for="editFullName">Full Name:</label>
                        <div class="input-container"><input type="text" id="editFullName" name="editFullName"
                                required><svg class="error-icon" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                                    clip-rule="evenodd" />
                            </svg><span class="error-message" id="editFullNameError"></span></div>
                    </div>
                    <div class="form-group form-row">
                        <label for="editEmail">Email Address:</label>
                        <div class="input-container"><input type="email" id="editEmail" name="editEmail" required><svg
                                class="error-icon" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                                    clip-rule="evenodd" />
                            </svg><span class="error-message" id="editEmailError"></span></div>
                    </div>
                    <div class="form-group form-row">
                        <label for="editPhone">Phone Number:</label>
                        <div class="input-container"><input type="tel" id="editPhone" name="editPhone" required><svg
                                class="error-icon" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                                    clip-rule="evenodd" />
                            </svg><span class="error-message" id="editPhoneError"></span></div>
                    </div>
                    <div class="form-group form-row">
                        <label for="editSubject">Subject:</label>
                        <div class="input-container">
                            <select id="editSubject" name="editSubject" required>
                                <option value="" disabled>-- Select an issue --</option>
                                <option value="Issue with Mobile Banking (USSD / App)">Issue with Mobile Banking (USSD /
                                    App)</option>
                                <option value="Problem with Bulk SMS Service">Problem with Bulk SMS Service</option>
                                <option value="Core Banking System Support">Core Banking System Support</option>
                                <option value="Other (General Inquiry)">Other (General Inquiry)</option>
                            </select><svg class="error-icon" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                                    clip-rule="evenodd" />
                            </svg><span class="error-message" id="editSubjectError"></span>
                        </div>
                    </div>
                    <div class="form-group form-row">
                        <label for="editMessage">Message:</label>
                        <div class="input-container"><textarea id="editMessage" name="editMessage" rows="5"
                                required></textarea><svg class="error-icon" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                                    clip-rule="evenodd" />
                            </svg><span class="error-message" id="editMessageError"></span></div>
                    </div>
                    <div class="form-group form-row">
                        <label>Preferred Contact:</label>
                        <div class="input-container">
                            <div class="radio-group"><label class="radio-label"><input type="radio" name="editContact"
                                        value="Email"><span class="radio-custom"></span>Email</label><label
                                    class="radio-label"><input type="radio" name="editContact" value="Phone"><span
                                        class="radio-custom"></span>Phone</label></div><span class="error-message"
                                id="editContactError"></span>
                        </div>
                    </div>
                    <div class="form-group form-row">
                        <label for="editAttachment">Attachment:</label>
                        <div class="input-container">
                            <div class="file-input-wrapper">
                                <button type="button" class="file-button">Choose File</button>
                                <span class="file-text">No file chosen</span>
                                <div class="file-preview-container"></div>
                                <input type="file" id="editAttachment" name="editAttachment"
                                    accept=".pdf,.jpg,.jpeg,.png">
                            </div>
                            <span class="allowed-files-text">Allowed files: PDF, JPG, PNG. Max size: 1MB.</span>
                            <span class="error-message" id="attachmentErrorEdit"></span>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer"><button class="modal-secondary-btn modal-cancel-btn">Cancel</button><button
                    id="saveChangesBtn" class="submit-btn">Save Changes</button></div>
        </div>
    </div>
    <div id="confirmModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Confirm Deletion</h2>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this ticket? This action cannot be undone.</p>
            </div>
            <div class="modal-footer"><button class="modal-secondary-btn modal-cancel-btn">Cancel</button><button
                    id="confirmOkBtn" class="submit-btn delete-btn">Delete</button></div>
        </div>
    </div>
    <div id="filterModal" class="modal">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <div class="modal-title-group"><svg viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z"
                            clip-rule="evenodd" />
                    </svg>
                    <h2>Filter Table</h2>
                </div><span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div id="filterRowsContainer"></div><button id="addFilterBtn" class="modal-add-btn">+ Add
                    Filter</button>
            </div>
            <div class="modal-footer"><button id="resetFilterBtn" class="modal-secondary-btn">Reset
                    Filters</button><button id="submitFilterBtn" class="submit-btn">Submit</button></div>
        </div>
    </div>
    <div id="sortModal" class="modal">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <div class="modal-title-group"><svg viewBox="0 0 20 20" fill="currentColor">
                        <path
                            d="M3 3a1 1 0 000 2h14a1 1 0 100-2H3zM3 7a1 1 0 000 2h10a1 1 0 100-2H3zM3 11a1 1 0 100 2h4a1 1 0 100-2H3zM13 16a1 1 0 102 0v-5.586l1.293 1.293a1 1 0 001.414-1.414l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 101.414 1.414L13 10.414V16z" />
                    </svg>
                    <h2>Sort Table</h2>
                </div><span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div id="sorterRowsContainer"></div><button id="addSorterBtn" class="modal-add-btn">+ Add
                    Sorter</button>
            </div>
            <div class="modal-footer"><button id="resetSorterBtn" class="modal-secondary-btn">Reset
                    Sorting</button><button id="submitSorterBtn" class="submit-btn">Submit</button></div>
        </div>
    </div>

    <div id="toast" class="toast"></div>
    <script src="app.js"></script>
</body>

</html>