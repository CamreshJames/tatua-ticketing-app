<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tatua ‚Äì Ticketing UI</title>
  <!--
    Single-file implementation (HTML + CSS + JS)
    - Semantic HTML5 structure
    - Matches layout shown in screenshots
    - In‚Äëmemory / sessionStorage / localStorage data modes
    - Client-side form validation with user feedback
    - Clean, commented code
  -->
  <style>
    :root{
      --bg:#0f0d16;          /* page background */
      --panel:#171427;       /* panels */
      --panel-2:#1f1a34;     /* darker strip */
      --muted:#bdb7d8;       /* muted text */
      --text:#efecff;        /* main text */
      --brand:#5b3ba6;       /* purple brand */
      --brand-2:#7a58e4;     /* accent */
      --ok:#23c55e;          /* success */
      --warn:#f59e0b;        /* warning */
      --danger:#ef4444;      /* danger */
      --border:#2d2745;      /* borders */
      --input:#1c1733;       /* input bg */
      --shadow: 0 10px 30px rgba(0,0,0,.4);
      --radius:12px;
      --radius-lg:16px;
      --radius-xl:20px;
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:var(--font); background:var(--bg); color:var(--text);
    }
    /* Top brand bar */
    header{
      background:linear-gradient(180deg, #20193d, #15112a);
      border-bottom:1px solid var(--border);
      position:sticky; top:0; z-index:5;
    }
    .topbar{max-width:1320px; margin:0 auto; display:flex; align-items:center; gap:18px; padding:12px 16px;}
    .logo{display:flex; align-items:center; gap:10px; font-weight:700}
    .logo-icon{width:22px; height:22px; background:linear-gradient(135deg, #ffcc66, #ff9f1c); border-radius:4px; box-shadow:inset 0 0 0 2px rgba(0,0,0,.25)}
    nav a{color:#e9e4ff; text-decoration:none; padding:8px 14px; border-radius:999px; font-weight:600; opacity:.9}
    nav a.active{background:rgba(122,88,228,.25); border:1px solid rgba(122,88,228,.5)}
    nav a:hover{background:rgba(122,88,228,.18)}

    /* Layout: two panels side by side */
    .wrap{max-width:1320px; margin:16px auto; padding:0 16px;}
    .grid{
      display:grid; gap:16px; grid-template-columns:1fr 1fr;
    }
    @media (max-width: 1060px){ .grid{ grid-template-columns:1fr; } }

    .card{
      background:var(--panel); border:1px solid var(--border); border-radius:var(--radius-lg); box-shadow:var(--shadow);
    }
    .card header{ position:relative; top:auto; background:var(--panel-2); border-bottom:1px solid var(--border); border-radius:var(--radius-lg) var(--radius-lg) 0 0; }
    .card .bar{ display:flex; align-items:center; justify-content:space-between; gap:12px; padding:10px 14px; }
    .title{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.2px}

    /* Form styles */
    form{ padding:16px; }
    fieldset{ border:none; margin:0; padding:0; display:grid; gap:12px; }
    .row{ display:grid; grid-template-columns:140px 1fr; gap:12px; align-items:center; }
    .row label{ color:var(--muted); font-size:.9rem; }
    input[type="text"], input[type="email"], input[type="tel"], select, textarea{
      width:100%; background:var(--input); border:1px solid var(--border); border-radius:10px; color:var(--text); padding:10px 12px; outline:none; transition:border .2s;
    }
    textarea{ min-height:110px; resize:vertical; }
    input:focus, select:focus, textarea:focus{ border-color:var(--brand-2); }
    .hint{ font-size:.8rem; color:var(--muted); margin-top:4px; }
    .error{ color:var(--danger); font-size:.82rem; margin-top:6px; }

    .inline{ display:flex; align-items:center; gap:16px; }
    .file{ display:flex; align-items:center; gap:10px; }

    .actions{ margin-top:10px; display:flex; align-items:center; gap:12px; }
    .btn{ appearance:none; border:1px solid var(--border); background:linear-gradient(180deg, #262040, #1a1533); color:#efeaff; padding:10px 16px; border-radius:999px; font-weight:700; cursor:pointer; }
    .btn:hover{ filter:brightness(1.05) }
    .btn.primary{ background:linear-gradient(180deg, #7a58e4, #5b3ba6); border-color:#6b4ad1; }

    /* Tickets List */
    .toolbar{ display:flex; gap:8px; align-items:center; }
    .pill{ display:inline-flex; align-items:center; gap:8px; border:1px solid var(--border); background:#1b1633; padding:6px 10px; border-radius:999px; font-weight:700; cursor:pointer; }
    .pill .x{ font-size:12px; opacity:.8 }

    table{ width:100%; border-collapse:separate; border-spacing:0; }
    thead th{ text-align:left; font-size:.82rem; color:var(--muted); padding:10px 12px; border-bottom:1px solid var(--border); position:sticky; top:58px; background:var(--panel); z-index:1; }
    tbody td{ padding:10px 12px; border-bottom:1px solid var(--border); vertical-align:middle; }

    .badge{ display:inline-flex; align-items:center; gap:6px; padding:4px 8px; border-radius:999px; border:1px solid var(--border); background:#1b1633; font-size:.8rem; color:#e8e2ff; }
    .muted{ color:var(--muted); font-size:.86rem; }
    .row-actions{ display:flex; gap:10px; align-items:center; }
    .icon{ width:18px; height:18px; display:inline-grid; place-items:center; border-radius:5px; border:1px solid var(--border); background:#1b1633; cursor:pointer; }
    .icon:hover{ background:#241b44 }

    /* Popups */
    dialog{ border:none; padding:0; border-radius:14px; width:min(680px, 92vw); background:var(--panel); color:var(--text); box-shadow:var(--shadow); }
    dialog::backdrop{ background:rgba(6,4,14,.6) }
    .pop-h{ display:flex; align-items:center; justify-content:space-between; padding:10px 14px; background:var(--panel-2); border-bottom:1px solid var(--border); border-radius:14px 14px 0 0; }
    .pop-c{ padding:14px; }
    .pop-row{ display:grid; grid-template-columns:180px 1fr 1fr; gap:10px; align-items:center; }
    .pop-actions{ display:flex; justify-content:flex-end; gap:10px; margin-top:10px; }

    /* Tiny helpers */
    .sr-only{ position:absolute; left:-10000px; }
    .w-8{ width:8ch }
    .w-12{ width:12ch }
    .w-20{ width:20ch }
  </style>
</head>
<body>
  <!-- Brand + navigation (semantic header/nav) -->
  <header>
    <div class="topbar" role="navigation" aria-label="Main">
      <div class="logo" aria-label="Tatua">
        <span class="logo-icon" aria-hidden="true"></span>
        <span>Tatua</span>
      </div>
      <nav>
        <a href="#form" class="active" id="tab-form">Raise Ticket</a>
        <a href="#list" id="tab-list">Tickets List</a>
      </nav>
      <div style="margin-left:auto" class="toolbar" aria-label="Storage mode">
        <label for="storageMode" class="muted">Storage:</label>
        <select id="storageMode" class="w-20" title="Choose where tickets are stored (in-memory, session or local)">
          <option value="memory">In‚ÄëMemory</option>
          <option value="session">sessionStorage</option>
          <option value="local">localStorage</option>
        </select>
        <button class="pill" id="btn-export" title="Download tickets JSON"><span>Export</span></button>
        <label class="pill" title="Import tickets JSON">
          <input id="importFile" type="file" accept="application/json" class="sr-only" />
          <span>Import</span>
        </label>
      </div>
    </div>
  </header>

  <main class="wrap">
    <div class="grid" id="views">
      <!-- Left: Raise Ticket form -->
      <section class="card" id="formPanel" aria-labelledby="formTitle">
        <header>
          <div class="bar">
            <div class="title" id="formTitle">Raise a Ticket</div>
          </div>
        </header>
        <form id="ticketForm" novalidate>
          <fieldset>
            <!-- Name -->
            <div class="row">
              <label for="fullName">Full Name:</label>
              <div>
                <input id="fullName" name="fullName" type="text" placeholder="Harvey Specter" autocomplete="name" required />
                <p class="hint">Enter your official name.</p>
                <p class="error" data-error-for="fullName"></p>
              </div>
            </div>
            <!-- Email -->
            <div class="row">
              <label for="email">Email Address:</label>
              <div>
                <input id="email" name="email" type="email" placeholder="harvey.specter@suits.us" autocomplete="email" required />
                <p class="error" data-error-for="email"></p>
              </div>
            </div>
            <!-- Phone -->
            <div class="row">
              <label for="phone">Phone Number:</label>
              <div>
                <input id="phone" name="phone" type="tel" placeholder="+254712345678" pattern="^\+?[0-9\-\s]{7,15}$" />
                <p class="hint">E.g. +254712345678</p>
                <p class="error" data-error-for="phone"></p>
              </div>
            </div>
            <!-- Subject -->
            <div class="row">
              <label for="subject">Subject:</label>
              <div>
                <select id="subject" name="subject" required>
                  <option value="">Select...</option>
                  <option>Mobile App is slow</option>
                  <option>Cannot login</option>
                  <option>Payment failed</option>
                  <option>Feature request</option>
                  <option>Other</option>
                </select>
                <p class="error" data-error-for="subject"></p>
              </div>
            </div>
            <!-- Message -->
            <div class="row">
              <label for="message">Message:</label>
              <div>
                <textarea id="message" name="message" placeholder="Describe the issue..." required></textarea>
                <p class="error" data-error-for="message"></p>
              </div>
            </div>
            <!-- Preferred Contact -->
            <div class="row">
              <span>Preferred Contact</span>
              <div class="inline" role="radiogroup" aria-label="Preferred Contact">
                <label><input type="radio" name="pref" value="email" checked /> Email</label>
                <label><input type="radio" name="pref" value="phone" /> Phone</label>
              </div>
            </div>
            <!-- Attachment -->
            <div class="row">
              <label for="attach">Attachment</label>
              <div class="file">
                <input id="attach" name="attach" type="file" />
                <span class="muted">(optional)</span>
              </div>
            </div>
            <!-- Terms -->
            <div class="row">
              <label for="terms">&nbsp;</label>
              <div>
                <label><input id="terms" name="terms" type="checkbox" required /> I agree to the <a href="#" class="muted">Terms and Conditions</a></label>
                <p class="error" data-error-for="terms"></p>
              </div>
            </div>
            <div class="actions">
              <button class="btn primary" type="submit">Submit</button>
              <button class="btn" type="reset">Reset</button>
            </div>
          </fieldset>
        </form>
      </section>

      <!-- Right: Tickets list -->
      <section class="card" id="listPanel" aria-labelledby="listTitle">
        <header>
          <div class="bar">
            <div class="title" id="listTitle">Tickets List</div>
            <div class="toolbar">
              <button class="pill" id="btn-sort" title="Sort"><span>‚ñ§ Sort</span></button>
              <button class="pill" id="btn-filter" title="Filter"><span>‚ßâ Filter</span></button>
              <button class="pill" id="btn-refresh" title="Refresh list"><span>‚ü≤ Refresh</span></button>
            </div>
          </div>
        </header>
        <div style="padding:6px 12px" class="muted">Showing <span id="count">0</span> ticket(s)</div>
        <div style="padding: 0 12px 12px 12px; overflow:auto;">
          <table aria-describedby="listTitle">
            <thead>
              <tr>
                <th class="w-8">Ticket ID</th>
                <th>Raised by</th>
                <th>Ticket Details</th>
                <th class="w-20">Date Created</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="tbody"></tbody>
          </table>
        </div>
      </section>
    </div>
  </main>

  <!-- Sort popup -->
  <dialog id="sortDlg" aria-labelledby="sortTitle">
    <div class="pop-h"><div id="sortTitle">Sort Table</div><button class="pill" data-close="sortDlg">‚úï</button></div>
    <div class="pop-c">
      <div class="pop-row">
        <label for="sortCol">Column</label>
        <select id="sortCol">
          <option value="id">Ticket ID</option>
          <option value="name">Raised by</option>
          <option value="subject">Ticket Details</option>
          <option value="created">Date Created</option>
        </select>
        <select id="sortDir">
          <option value="asc">Ascending</option>
          <option value="desc">Descending</option>
        </select>
      </div>
      <div class="pop-actions">
        <button class="btn" data-close="sortDlg">Cancel</button>
        <button class="btn primary" id="sortApply">Apply</button>
      </div>
    </div>
  </dialog>

  <!-- Filter popup -->
  <dialog id="filterDlg" aria-labelledby="filterTitle">
    <div class="pop-h"><div id="filterTitle">Filter Table</div><button class="pill" data-close="filterDlg">‚úï</button></div>
    <div class="pop-c">
      <div class="pop-row">
        <label for="filterCol">Column</label>
        <select id="filterCol">
          <option value="subject">Ticket Details</option>
          <option value="name">Raised by</option>
          <option value="created">Date Created (YYYY-MM-DD)</option>
        </select>
        <select id="filterRel">
          <option value="includes">includes</option>
          <option value="equals">equals</option>
          <option value="starts">starts with</option>
        </select>
        <input id="filterVal" type="text" placeholder="Enter value" />
      </div>
      <div class="pop-actions">
        <button class="btn" id="filterReset">Reset</button>
        <button class="btn primary" id="filterApply">Apply</button>
      </div>
    </div>
  </dialog>

  <template id="rowTpl">
    <tr>
      <td data-col="id"></td>
      <td data-col="name"></td>
      <td data-col="subject"></td>
      <td data-col="created" class="muted"></td>
      <td>
        <div class="row-actions">
          <span class="icon" title="Show popup with more information" data-action="info">i</span>
          <span class="icon" title="Download ticket attachment" data-action="download">‚§ì</span>
          <span class="icon" title="Trigger call if preferred contact is phone" data-action="call">üìû</span>
          <span class="icon" title="Trigger email if preferred contact is email" data-action="email">‚úâÔ∏è</span>
          <span class="icon" title="Edit ticket" data-action="edit">‚úé</span>
          <span class="icon" title="Delete the ticket" data-action="delete">üóëÔ∏è</span>
        </div>
      </td>
    </tr>
  </template>

  <script>
    // ------------------------------
    // Utilities & data management
    // ------------------------------
    const $ = (sel, ctx=document) => ctx.querySelector(sel);
    const $$ = (sel, ctx=document) => Array.from(ctx.querySelectorAll(sel));

    // Demo seed data for first run
    const SEED = [
      { id: 1, name: "Harvey Specter", email: "harvey.specter@suits.us", phone: "+254712345678", subject:"Mobile App is slow", message:"Logging in is taking 5 mins...", pref:"email", created:"2024-03-06 18:00:00", attachment:null },
      { id: 2, name: "Luis Litt", email: "", phone: "+254712345678", subject:"Mobile App is slow", message:"Logging in is taking 5 mins...", pref:"phone", created:"2024-03-06 18:00:00", attachment:null },
      { id: 3, name: "Harvey Specter", email: "harvey.specter@suits.us", phone: "", subject:"Mobile App is slow", message:"Login delays...", pref:"email", created:"2024-03-06 18:00:00", attachment:null }
    ];

    // Storage adapters (in-memory, session, local)
    const Store = {
      mode: 'memory',
      memory: { key: null, data: [...SEED] },
      get key(){ return 'tatua_tickets'; },
      setMode(m){ this.mode = m; this.ensure(); UI.render(); },
      ensure(){
        if(this.mode==='local' && !localStorage.getItem(this.key)) localStorage.setItem(this.key, JSON.stringify(SEED));
        if(this.mode==='session' && !sessionStorage.getItem(this.key)) sessionStorage.setItem(this.key, JSON.stringify(SEED));
      },
      read(){
        if(this.mode==='memory') return this.memory.data;
        if(this.mode==='local') return JSON.parse(localStorage.getItem(this.key) || '[]');
        if(this.mode==='session') return JSON.parse(sessionStorage.getItem(this.key) || '[]');
      },
      write(list){
        if(this.mode==='memory'){ this.memory.data = list; return; }
        const str = JSON.stringify(list);
        if(this.mode==='local') localStorage.setItem(this.key, str);
        if(this.mode==='session') sessionStorage.setItem(this.key, str);
      },
      nextId(){
        const max = this.read().reduce((m, r)=> Math.max(m, r.id), 0);
        return max + 1;
      }
    };

    // ------------------------------
    // UI rendering and behaviors
    // ------------------------------
    const UI = {
      state: { sort:{col:'id',dir:'asc'}, filter:null },
      get list(){
        let rows = [...Store.read()];
        const {filter} = this.state;
        if(filter){
          const { col, rel, val } = filter;
          rows = rows.filter(r=>{
            const v = (col==='created'? r.created : col==='name'? r.name : r.subject).toLowerCase();
            const s = String(val).toLowerCase();
            if(rel==='equals') return v===s;
            if(rel==='starts') return v.startsWith(s);
            return v.includes(s);
          });
        }
        const {col, dir} = this.state.sort;
        const cmp = (a,b)=>{
          const va = col==='id'? a.id : col==='created'? a.created : col==='name'? a.name : a.subject;
          const vb = col==='id'? b.id : col==='created'? b.created : col==='name'? b.name : b.subject;
          return (va>vb?1:va<vb?-1:0) * (dir==='asc'?1:-1);
        };
        rows.sort(cmp);
        return rows;
      },
      render(){
        const tbody = $('#tbody');
        tbody.innerHTML='';
        const tpl = $('#rowTpl');
        for(const r of this.list){
          const tr = tpl.content.firstElementChild.cloneNode(true);
          tr.querySelector('[data-col="id"]').textContent = r.id;
          const nameCell = tr.querySelector('[data-col="name"]');
          nameCell.innerHTML = `<div>${r.name}</div><div class="muted">${r.email || r.phone || ''}</div>`;
          tr.querySelector('[data-col="subject"]').innerHTML = `<span class="badge">${r.subject}</span> <span class="muted">${r.message.substring(0,48)}${r.message.length>48?'‚Ä¶':''}</span>`;
          tr.querySelector('[data-col="created"]').textContent = r.created;
          // Hook actions
          tr.querySelector('[data-action="info"]').addEventListener('click',()=>UI.info(r));
          tr.querySelector('[data-action="delete"]').addEventListener('click',()=>UI.remove(r.id));
          tr.querySelector('[data-action="edit"]').addEventListener('click',()=>UI.edit(r));
          tr.querySelector('[data-action="download"]').addEventListener('click',()=>UI.download(r));
          tr.querySelector('[data-action="call"]').addEventListener('click',()=>UI.call(r));
          tr.querySelector('[data-action="email"]').addEventListener('click',()=>UI.mail(r));
          tbody.appendChild(tr);
        }
        $('#count').textContent = this.list.length;
      },
      add(rec){ const list = Store.read(); list.push(rec); Store.write(list); this.render(); },
      remove(id){ if(confirm('Delete ticket #' + id + '?')){ const list=Store.read().filter(r=>r.id!==id); Store.write(list); this.render(); }},
      info(r){ alert(`#${r.id} ‚Äì ${r.subject}\n\nFrom: ${r.name}\nEmail: ${r.email || '‚Äî'}\nPhone: ${r.phone || '‚Äî'}\nPreferred: ${r.pref}\n\nMessage:\n${r.message}`); },
      download(r){ if(r.attachment){ const a=document.createElement('a'); a.href=r.attachment.data; a.download=r.attachment.name; a.click(); } else alert('No attachment'); },
      call(r){ if(r.pref==='phone' && r.phone) window.location.href = 'tel:' + r.phone; else alert('Preferred contact is not phone or phone missing'); },
      mail(r){ if(r.pref==='email' && r.email) window.location.href = 'mailto:' + r.email + '?subject=' + encodeURIComponent(r.subject); else alert('Preferred contact is not email or email missing'); },
      edit(r){
        // Load into form for quick edit
        $('#fullName').value = r.name; $('#email').value = r.email; $('#phone').value = r.phone; $('#subject').value = r.subject; $('#message').value = r.message; $$('input[name="pref"]').forEach(x=>x.checked = (x.value===r.pref)); $('#terms').checked = true; window.scrollTo({top:0, behavior:'smooth'});
        // On submit we will replace existing by id (stored temporarily)
        $('#ticketForm').dataset.editId = r.id;
        $('#tab-form').classList.add('active'); $('#tab-list').classList.remove('active');
      }
    };

    // ------------------------------
    // Form handling with validation
    // ------------------------------
    const form = $('#ticketForm');
    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      // Clear errors
      $$('[data-error-for]').forEach(el=>el.textContent='');

      const data = new FormData(form);
      const record = {
        id: form.dataset.editId ? Number(form.dataset.editId) : Store.nextId(),
        name: data.get('fullName').trim(),
        email: data.get('email').trim(),
        phone: data.get('phone').trim(),
        subject: data.get('subject'),
        message: data.get('message').trim(),
        pref: data.get('pref'),
        created: new Date().toISOString().slice(0,19).replace('T',' '),
        attachment: null
      };

      // Validate
      let ok = true;
      const setErr = (k,msg)=>{ const el=$(`[data-error-for="${k}"]`); if(el){ el.textContent=msg; ok=false; }};
      if(!record.name) setErr('fullName','Full name is required');
      if(!record.email && !record.phone) setErr('email','Either email or phone is required');
      if(record.email && !/^\S+@\S+\.\S+$/.test(record.email)) setErr('email','Provide a valid email');
      if(record.phone && !/^\+?[0-9\-\s]{7,15}$/.test(record.phone)) setErr('phone','Provide a valid phone number');
      if(!record.subject) setErr('subject','Select a subject');
      if(!record.message) setErr('message','Message is required');
      if(!$('#terms').checked) setErr('terms','You must accept the terms');
      if(!ok) return;

      // Attachment to data URL (if provided)
      const file = $('#attach').files[0];
      if(file){
        const buf = await file.arrayBuffer();
        const base64 = btoa(String.fromCharCode(...new Uint8Array(buf)));
        record.attachment = { name:file.name, type:file.type, data:`data:${file.type};base64,${base64}` };
      }

      // Persist (insert or update)
      const list = Store.read();
      const idx = list.findIndex(r=>r.id===record.id);
      if(idx>-1) list[idx]=record; else list.push(record);
      Store.write(list);
      UI.render();
      form.reset();
      delete form.dataset.editId;
      alert('Ticket saved');
    });

    // ------------------------------
    // Toolbar & dialogs
    // ------------------------------
    $('#btn-refresh').addEventListener('click', ()=> UI.render());

    // Sort dialog
    const sortDlg = $('#sortDlg');
    $('#btn-sort').addEventListener('click', ()=> sortDlg.showModal());
    $('#sortApply').addEventListener('click', ()=>{ UI.state.sort = { col:$('#sortCol').value, dir:$('#sortDir').value }; sortDlg.close(); UI.render(); });

    // Filter dialog
    const filterDlg = $('#filterDlg');
    $('#btn-filter').addEventListener('click', ()=> filterDlg.showModal());
    $('#filterApply').addEventListener('click', ()=>{ UI.state.filter = { col:$('#filterCol').value, rel:$('#filterRel').value, val:$('#filterVal').value }; filterDlg.close(); UI.render(); });
    $('#filterReset').addEventListener('click', ()=>{ UI.state.filter = null; $('#filterVal').value=''; filterDlg.close(); UI.render(); });

    // Generic dialog close buttons
    $$('[data-close]').forEach(btn=> btn.addEventListener('click', (e)=>{ const id = e.currentTarget.getAttribute('data-close'); $(`#${id}`).close(); }));

    // Storage switcher
    $('#storageMode').addEventListener('change', (e)=>{ Store.setMode(e.target.value); });

    // Import / export
    $('#btn-export').addEventListener('click', ()=>{
      const blob = new Blob([JSON.stringify(Store.read(), null, 2)], {type:'application/json'});
      const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href=url; a.download='tickets.json'; a.click(); URL.revokeObjectURL(url);
    });
    $('#importFile').addEventListener('change', async (e)=>{
      const file = e.target.files[0]; if(!file) return;
      const text = await file.text();
      try{ const data = JSON.parse(text); if(Array.isArray(data)){ Store.write(data); UI.render(); alert('Imported ' + data.length + ' records'); } }
      catch{ alert('Invalid JSON'); }
      e.target.value='';
    });

    // Tabs visual only
    $('#tab-form').addEventListener('click', (e)=>{ e.preventDefault(); $('#tab-form').classList.add('active'); $('#tab-list').classList.remove('active'); window.scrollTo({top:0, behavior:'smooth'}); });
    $('#tab-list').addEventListener('click', (e)=>{ e.preventDefault(); $('#tab-list').classList.add('active'); $('#tab-form').classList.remove('active'); window.scrollTo({top:document.body.scrollHeight, behavior:'smooth'}); });

    // Boot
    Store.ensure(); UI.render();
  </script>
</body>
</html>